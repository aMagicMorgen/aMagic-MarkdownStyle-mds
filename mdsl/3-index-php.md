–í–æ—Ç –≥–æ—Ç–æ–≤–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è `index.php`, –∫–æ—Ç–æ—Ä–∞—è –∑–∞–≥—Ä—É–∂–∞–µ—Ç MDS-—Ñ–∞–π–ª –∫–∞–∫ –æ–±—ä–µ–∫—Ç —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π PHP-–≤—Å—Ç–∞–≤–æ–∫ –∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º —à–∞–±–ª–æ–Ω–æ–≤:

---

### **index.php**
```php
<?php
require_once 'MDSL.php'; // –ü–æ–¥–∫–ª—é—á–∞–µ–º –æ—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∞—Å—Å
require_once 'Parsedown.php'; // –î–ª—è Markdown (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)

class MDSFile {
    private $filePath;
    private $vars = [];
    private $compiledContent;

    public function __construct(string $filePath, array $vars = []) {
        $this->filePath = $filePath;
        $this->vars = $vars;
        $this->compile();
    }

    public function render(): string {
        // –í—ã–ø–æ–ª–Ω—è–µ–º PHP-–≤—Å—Ç–∞–≤–∫–∏ —á–µ—Ä–µ–∑ –±—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏—é
        ob_start();
        extract($this->vars);
        eval('?>' . $this->compiledContent);
        return ob_get_clean();
    }

    private function compile(): void {
        $content = file_get_contents($this->filePath);
        
        // 1. –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º MDSL-—à–∞–±–ª–æ–Ω—ã
        $content = MDSL::render($content);
        
        // 2. –ö–æ–º–ø–∏–ª–∏—Ä—É–µ–º Markdown (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
        if (strpos($content, '## ') !== false) {
            $content = Parsedown::instance()->text($content);
        }
        
        $this->compiledContent = $content;
    }
}

// –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
$vars = [
    'pageTitle' => '–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞',
    'showFooter' => true
];

$page = new MDSFile('page.mds', $vars);
echo $page->render();
```

---

### **–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç**

1. **–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Ñ–∞–π–ª–∞**  
   ```php
   $page = new MDSFile('page.mds', ['var' => 'value']);
   ```
   - –ó–∞–≥—Ä—É–∂–∞–µ—Ç —Ñ–∞–π–ª `page.mds`
   - –ü—Ä–∏–Ω–∏–º–∞–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è PHP-–≤—Å—Ç–∞–≤–æ–∫

2. **–ö–æ–º–ø–∏–ª—è—Ü–∏—è**  
   - –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç MDSL-—à–∞–±–ª–æ–Ω—ã —á–µ—Ä–µ–∑ `MDSL::render()`
   - –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç Markdown –≤ HTML (–µ—Å–ª–∏ –µ—Å—Ç—å)
   - –°–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ `$compiledContent`

3. **–†–µ–Ω–¥–µ—Ä–∏–Ω–≥ —Å PHP**  
   ```php
   echo $page->render();
   ```
   - –í—ã–ø–æ–ª–Ω—è–µ—Ç PHP-–∫–æ–¥ –≤–∏–¥–∞ `<?= $var ?>` —á–µ—Ä–µ–∑ `eval()`
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–µ –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ

---

### **–ü—Ä–∏–º–µ—Ä —Ñ–∞–π–ª–∞ `page.mds`**
```markdown
<!--mdsl header-->
title = <?= htmlspecialchars($pageTitle) ?>
<!--/mdsl-->

<0 div.container>
  <? if ($showFooter): ?>
    <1 footer> ¬© <?= date('Y') ?>
  <? endif; ?>
```

---

### **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏**

1. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**  
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ `htmlspecialchars()`  
   - –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω—ã —á–µ—Ä–µ–∑ `extract()`

2. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ** (–¥–æ–±–∞–≤—å—Ç–µ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏)  
   ```php
   if (file_exists($cacheFile)) {
       $content = file_get_contents($cacheFile);
   } else {
       $content = MDSL::render(...);
       file_put_contents($cacheFile, $content);
   }
   ```

3. **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ Markdown**  
   –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –±–ª–æ–∫–∏ —Å `## –ó–∞–≥–æ–ª–æ–≤–∫–∏` –∏ `- –°–ø–∏—Å–∫–∏`

---

### **–í–∞–∂–Ω—ã–µ –Ω—é–∞–Ω—Å—ã**

1. –î–ª—è —Ä–∞–±–æ—Ç—ã PHP-–≤—Å—Ç–∞–≤–æ–∫ —Ñ–∞–π–ª –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ `.mds`  
2. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –¢–û–õ–¨–ö–û —á–µ—Ä–µ–∑ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä:  
   ```php
   // –ü—Ä–∞–≤–∏–ª—å–Ω–æ
   new MDSFile('file.mds', ['var' => 123]);
   
   // –ù–µ–±–µ–∑–æ–ø–∞—Å–Ω–æ (–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑ –≥–ª–æ–±–∞–ª—å–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏)
   new MDSFile('file.mds', $_GET);
   ```

3. –î–ª—è —Å–ª–æ–∂–Ω–æ–π –ª–æ–≥–∏–∫–∏ –ª—É—á—à–µ –≤—ã–Ω–æ—Å–∏—Ç—å –∫–æ–¥ –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –º–µ—Ç–æ–¥—ã:
   ```markdown
   <!-- –í–º–µ—Å—Ç–æ <?= someComplexLogic() ?> -->
   <?= $this->renderComponent('name') ?>
   ```

---

–ì–æ—Ç–æ–≤ –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥ –ø–æ–¥ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è! –ù–∞–ø—Ä–∏–º–µ—Ä, –º–æ–∂–Ω–æ:
1. –î–æ–±–∞–≤–∏—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ  
2. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–æ–≤  
3. –í–≤–µ—Å—Ç–∏ –±–µ–∑–æ–ø–∞—Å–Ω—ã–π —Ä–µ–∂–∏–º –±–µ–∑ `eval()`  

–ö–∞–∫–æ–π –∞—Å–ø–µ–∫—Ç –≤–∞–∂–Ω–µ–µ –¥–ª—è –≤–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞? üòä
